# Редактор уровней #

Данный документ описывает основные принципы и концепции при работе с редактором уровней.

## Конфигурационные файлы ##

### С чего начать? ###

Для начала необходимо созтать конфигурационный файл для материала (не путать с материалами Unity). Материалы - это конфигурационные объекты в которых утсанавливаеться отношение между типом материала и графичким объектом Sprite. 

### Как создать материал? ###

Лучше всего перейти в папку
> Assets/Sokoban/Data/Materials

Если такой папки нет - её необходимо создать. Далее с помощью конекстного меню (ПКМ) выбрать пункт
> Sokoban/Levels/Tiles/Material Tile Config

Так будет создан файл с двумя полями:
1. Tile Material Type - тип материала
1. Material Sprite - необходимо указать ссылку на спрайт котоый соответствует типу материала для тайла.

На данный момент расыеты построены на допущении что один тайл равен 100 пикселям.

### Создание конфига тайла ###

После того как будет создан материал - самое время заняться созданием конфига для тайла. Если предидущий конфиг материала отвечал на вопрос КАК ОБЪЕКТ БУДЕТ ВЫГЛЯДЕТЬ? то конфиг тайла будет отвечать за повдеение объекта.

 Как и в предидущем случае с помощью уже знакомого контекстного меню создаем конфиг в директории: 
 > Assets/Sokoban/Data/Tiles

С помощью меню:
> Sokoban/Levels/Tiles/Tile Config

Здесь первым параметром будет служить "проходимость" объекта, а вторым ссылка на конфиг материала, который был создан ранее. 

### Создание библиотеки конфигов ###

Заключительным штрихом будет создание "библиотеки" конфигов тайлов. Позже она нам понадобиться для динамического редактирования уровня, потому в той же директории: 
 > Assets/Sokoban/Data/Tiles

выбираем контекстное меню:

> Sokoban/Levels/Tiles/Tile Config Library

Где нужно будет указать количестко элементов в списке и просто назначить ранее созданный конфиг тайла.

## Окно редактора ##

Редактор уроней - представляет собой сущность EditorWindow. Это кастомная панель содержащая функционал для работы с уровнями. Для вызова реадктора - необходимо в системном меню (вершняя граница экрана, там где File, Edit...), вызвать пункт меню:

>Sokoban/Levels/Levels Editor

В результате этой операции появиться окно редактора уровней.

### Назначение библиотеки конфигов ###
Самым первым шагом должно стать назначение библотеки конфигов из предидущего раздела. Так с помощью этой библиотеки будут установлены взяимосвязи между данными и графичесмикми жлементами.

### Выбор Конфига ###

Если ошибок не возникло, то после назначения библиотеки в редакторе станут доступны функции по работе с уровнями, однако для полноыты картины, неодходимо задать текущий конфиг тайла, для этого достаточно кликнуть на кнопке с типом тайла.

### Создвние уровней ###

Под сощданием подразумеваеться либо непосредственное создание нового уровня. 

#### Создание нового уровня ####
Для этого нужно заполнить имя будущего уровня (например level-01) и размерность по осям X и Y. Далее надать на кнопку "Create New Level".

#### Загрузка уровня из JSON ####
Для этого нужно выбрать текстовый файл типа .json. И нажать на кнопку "Load Level".

Если все прошло без ошибок, то длаее внизупоявяться опеционные кнопки  - соответствующие каждому тайлу в модели уровня. выбирая новые конфиги тайлов и кликая по жтим кнопкам - можно менять типы тайлов.

 ### Построение уровня на сцене ###
 
 После завершения редаткирования достаточно нажать на кнопку "Construct Level" и редактор уровней построит визуализацию уровня на основе модели данных.

### Сохранение уровня в JSON ###
Последняя опция на данный момент - это сериализация модели уровня в файл JSON и сохранение его в в папку проекта.

>Assets/Sokoban/Data/Levels

Имя файла - это значение имени файла "Level Name" и текущей даты, например:
`Level-02-2020-05-08-03-58-22.json`

### Впросы и поддержка ###

Вопросы и консультации возможны путем сообщений через [Upwork](https://www.upwork.com/messages/rooms/room_c40e54afc9ef2ff5c4b41be798329a1e)

Либо через E-mail: [serhii.chechui@gmail.com](mailto:serhii.chechui@gmail.com)